<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="https://res.cloudinary.com/djttn4xvk/image/upload/v1744102120/image_2025-04-08_094426106_mpi7sp.ico">
    <title>Poxel Clan Wars</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: #ffffff;
        }
        
        header {
            background-color: #1e1e1e;
            color: #ffffff;
            text-align: center;
            padding: 2rem 0;
            margin-bottom: 2rem;
            border-bottom: 3px solid #00aa00;
            position: relative; /* Added for positioning the back button */
        }
        
        h1 {
            margin: 0;
            font-size: 2.5rem;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        /* Back button styles */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background-color: #00aa00;
            color: black;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
            text-decoration: none;
            display: inline-block;
        }
        
        .back-button:hover {
            background-color: #FFB833;
        }
        
        main {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        section {
            margin-bottom: 3rem;
            background-color: #1e1e1e;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        h2 {
            border-bottom: 2px solid #00aa00;
            padding-bottom: 0.5rem;
            margin-top: 0;
        }
        
        .match {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            margin-bottom: 1rem;
            background-color: #2d2d2d;
            border-radius: 4px;
            transition: transform 0.2s;
        }
        
        .match:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        
        .match-teams {
            flex: 2;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .match-details {
            flex: 1;
            text-align: center;
            color: #cccccc;
        }
        
        .match-time {
            flex: 1;
            text-align: right;
        }
        
        .countdown {
            font-size: 1.1rem;
            font-weight: bold;
            color: #ffffff;
        }
        
        .live {
            color: #ffffff;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            font-weight: bold;
        }
        
        .live-dot {
            width: 10px;
            height: 10px;
            background-color: #00ff00;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        
        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #333;
        }
        
        th {
            background-color: #00aa00;
            color: black;
        }
        
        tr:hover {
            background-color: #2d2d2d;
        }
        
        .bracket {
            display: flex;
            overflow-x: auto;
            padding: 2rem 0;
        }
        
        .bracket-round {
            display: flex;
            flex-direction: column;
            margin-right: 2rem;
            min-width: 200px;
        }
        
        .bracket-title {
            text-align: center;
            margin-bottom: 1rem;
            color: #00aa00;
            font-weight: bold;
        }
        
        .bracket-match {
            margin-bottom: 1.5rem;
            background-color: #2d2d2d;
            border-radius: 4px;
            padding: 1rem;
            position: relative;
        }
        
        .bracket-match:after {
            content: '';
            position: absolute;
            right: -2rem;
            top: 50%;
            width: 2rem;
            height: 2px;
            background-color: #00aa00;
        }
        
        .bracket-round:last-child .bracket-match:after {
            display: none;
        }
        
        .team {
            margin-bottom: 0.5rem;
        }
        
        .team-name {
            font-weight: bold;
            margin-bottom: 0.2rem;
        }
        
        .team-players {
            font-size: 0.85rem;
            color: #cccccc;
        }
        
        .buttons {
            margin-top: 1rem;
            display: flex;
            gap: 10px;
        }
        
        button {
            background-color: #00aa00;
            color: black;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        button:hover {
            background-color: #FFB833;
        }
        
        .hidden {
            display: none;
        }
        
        footer {
            text-align: center;
            padding: 2rem 0;
            margin-top: 2rem;
            background-color: #1e1e1e;
            border-top: 1px solid #333;
        }
    </style>
</head>
<body>
    <header>
        <!-- Back button added here -->
        <a href="index.html" class="back-button">Back</a>
        <h1>Poxel Clan Wars</h1>
    </header>
    
    <main>
        <section id="upcoming-matches">
            <h2>Upcoming Matches</h2>
            <div id="matches-container">
                <!-- Matches will be inserted here by JavaScript -->
            </div>
        </section>
        
        <section id="clan-stats">
            <h2>Clan Statistics</h2>
            <table id="clan-table">
                <thead>
                    <tr>
                        <th>Clan Name</th>
                        <th>Wins</th>
                        <th>Losses</th>
                        <th>Win Rate</th>
                    </tr>
                </thead>
                <tbody id="clan-stats-body">
                    <!-- Clan stats will be inserted here by JavaScript -->
                </tbody>
            </table>
        </section>
        
        <section id="tournament">
            <h2>Tournament Bracket</h2>
            <div class="bracket" id="bracket-container">
                <!-- Tournament bracket will be inserted here by JavaScript -->
            </div>
        </section>
    </main>
    
    <footer>
        <p>Â© 2025 Poxel Competitive League</p>
    </footer>
    
    <script>
        // Data structures for matches, clans, and tournament
        let matches = [
            {
                id: 1,
                team1: "player",
                team2: "player",
                details: "Casual - Match Day",
                timestamp: new Date("2025-04-10T20:00:00").getTime(),
                live: false
            },
        ];
        
        let clans = [
            { name: "CLAN", wins: 0, losses: 0 },
            { name: "CLAN", wins: 0, losses: 0 },
            { name: "CLAN", wins: 0, losses: 0 },
            { name: "CLAN", wins: 0, losses: 0 },
            { name: "CLAN", wins: 0, losses: 0 },
            { name: "CLAN", wins: 0, losses: 0 }
        ];
        
        let tournament = {
            rounds: [
            {
                    name: "Qualifying",
                    matches: [
                        {
                            team1: {
                                name: "PLACEHOLDERTHIS!",
                                players: ["OK BRO"]
                            },
                            team2: {
                                name: "NAME",
                                players: ["SOMEONE"]
                            }
                        },
                        {
                            team1: {
                                name: "NAME",
                                players: ["SOMEONE"]
                            },
                            team2: {
                                name: "NAME",
                                players: ["SOMEONE"]
                            }
                        }
                    ]
                },
                {
                    name: "Quarter Finals",
                    matches: [
                        {
                            team1: {
                                name: "PLACEHOLDERTHIS!",
                                players: ["OK BRO"]
                            },
                            team2: {
                                name: "NAME",
                                players: ["SOMEONE"]
                            }
                        },
                        {
                            team1: {
                                name: "NAME",
                                players: ["SOMEONE"]
                            },
                            team2: {
                                name: "NAME",
                                players: ["SOMEONE"]
                            }
                        }
                    ]
                },
                {
                    name: "Semi Finals",
                    matches: [
                        {
                            team1: {
                                name: "NAME",
                                players: ["SOMEONE"]
                            },
                            team2: {
                                name: "NAME",
                                players: ["SOMEONE"]
                            }
                        }
                    ]
                },
                {
                    name: "Finals",
                    matches: [
                        {
                            team1: {
                                name: "NONE",
                                players: ["SOMEONE"]
                            },
                            team2: {
                                name: "NONE",
                                players: ["SOMEONE"]
                            }
                        }
                    ]
                }
            ]
        };
        
        // Function to render matches
        function renderMatches() {
            const matchesContainer = document.getElementById('matches-container');
            matchesContainer.innerHTML = '';
            
            matches.forEach(match => {
                const matchElement = document.createElement('div');
                matchElement.className = 'match';
                
                const now = Date.now();
                const isLive = now >= match.timestamp && now < (match.timestamp + 3600000); // Consider a match live for 1 hour
                match.live = isLive;
                
                let timeDisplay;
                if (isLive) {
                    timeDisplay = `<div class="live"><span class="live-dot"></span> LIVE MATCH</div>`;
                } else if (now < match.timestamp) {
                    timeDisplay = `<div class="countdown" data-time="${match.timestamp}">Loading...</div>`;
                } else {
                    timeDisplay = `<div>Completed</div>`;
                }
                
                matchElement.innerHTML = `
                    <div class="match-teams">${match.team1} vs ${match.team2}</div>
                    <div class="match-details">${match.details}</div>
                    <div class="match-time">${timeDisplay}</div>
                `;
                
                matchesContainer.appendChild(matchElement);
            });
            
            // Start the countdown timers
            updateCountdowns();
        }
        
        // Function to update countdown timers
        function updateCountdowns() {
            const countdowns = document.querySelectorAll('.countdown');
            
            countdowns.forEach(countdown => {
                const targetTime = parseInt(countdown.getAttribute('data-time'));
                const now = Date.now();
                const diff = targetTime - now;
                
                if (diff <= 0) {
                    // Reload to show "LIVE" instead of countdown
                    renderMatches();
                    return;
                }
                
                // Calculate days, hours, minutes, seconds
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((diff % (1000 * 60)) / 1000);
                
                let timeString = '';
                if (days > 0) timeString += `${days}d `;
                timeString += `${hours.toString().padStart(2, '0')}:`;
                timeString += `${minutes.toString().padStart(2, '0')}:`;
                timeString += `${seconds.toString().padStart(2, '0')}`;
                
                countdown.textContent = timeString;
            });
        }
        
        // Function to render clan stats
        function renderClanStats() {
            const clanStatsBody = document.getElementById('clan-stats-body');
            clanStatsBody.innerHTML = '';
            
            clans.sort((a, b) => b.wins - a.wins);
            
            clans.forEach(clan => {
                const winRate = (clan.wins / (clan.wins + clan.losses) * 100).toFixed(1);
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${clan.name}</td>
                    <td>${clan.wins}</td>
                    <td>${clan.losses}</td>
                    <td>${winRate}%</td>
                `;
                
                clanStatsBody.appendChild(row);
            });
        }
        
        // Function to render tournament bracket
        function renderTournament() {
            const bracketContainer = document.getElementById('bracket-container');
            bracketContainer.innerHTML = '';
            
            tournament.rounds.forEach(round => {
                const roundElement = document.createElement('div');
                roundElement.className = 'bracket-round';
                
                const roundTitle = document.createElement('div');
                roundTitle.className = 'bracket-title';
                roundTitle.textContent = round.name;
                roundElement.appendChild(roundTitle);
                
                round.matches.forEach(match => {
                    const matchElement = document.createElement('div');
                    matchElement.className = 'bracket-match';
                    
                    // Team 1
                    const team1Element = document.createElement('div');
                    team1Element.className = 'team';
                    team1Element.innerHTML = `
                        <div class="team-name">${match.team1.name}</div>
                        <div class="team-players">${match.team1.players.join(', ')}</div>
                    `;
                    matchElement.appendChild(team1Element);
                    
                    // Team 2
                    const team2Element = document.createElement('div');
                    team2Element.className = 'team';
                    team2Element.innerHTML = `
                        <div class="team-name">${match.team2.name}</div>
                        <div class="team-players">${match.team2.players.join(', ')}</div>
                    `;
                    matchElement.appendChild(team2Element);
                    
                    roundElement.appendChild(matchElement);
                });
                
                bracketContainer.appendChild(roundElement);
            });
        }
        
        // Initialize the website
        function initializeWebsite() {
            renderMatches();
            renderClanStats();
            renderTournament();
            
            // Update countdowns every second
            setInterval(updateCountdowns, 1000);
            
            // Check for live matches every minute
            setInterval(renderMatches, 60000);
        }
        
        // Start the website when the DOM is loaded
        document.addEventListener('DOMContentLoaded', initializeWebsite);
        
        // UTILITY FUNCTIONS FOR LATER EDITING
        
        // Function to add a new match
        function addMatch(team1, team2, details, timestamp) {
            const newId = matches.length > 0 ? Math.max(...matches.map(m => m.id)) + 1 : 1;
            matches.push({
                id: newId,
                team1: team1,
                team2: team2,
                details: details,
                timestamp: timestamp,
                live: false
            });
            renderMatches();
        }
        
        // Function to update a match
        function updateMatch(id, team1, team2, details, timestamp) {
            const matchIndex = matches.findIndex(m => m.id === id);
            if (matchIndex !== -1) {
                matches[matchIndex] = {
                    ...matches[matchIndex],
                    team1: team1 || matches[matchIndex].team1,
                    team2: team2 || matches[matchIndex].team2,
                    details: details || matches[matchIndex].details,
                    timestamp: timestamp || matches[matchIndex].timestamp
                };
                renderMatches();
            }
        }
        
        // Function to remove a match
        function removeMatch(id) {
            matches = matches.filter(m => m.id !== id);
            renderMatches();
        }
        
        // Function to add a clan
        function addClan(name, wins = 0, losses = 0) {
            clans.push({ name, wins, losses });
            renderClanStats();
        }
        
        // Function to update clan stats
        function updateClanStats(name, wins, losses) {
            const clanIndex = clans.findIndex(c => c.name === name);
            if (clanIndex !== -1) {
                clans[clanIndex] = {
                    name: name,
                    wins: wins !== undefined ? wins : clans[clanIndex].wins,
                    losses: losses !== undefined ? losses : clans[clanIndex].losses
                };
                renderClanStats();
            }
        }
        
        // Function to remove a clan
        function removeClan(name) {
            clans = clans.filter(c => c.name !== name);
            renderClanStats();
        }
        
        // Function to update tournament bracket
        function updateTournament(newTournament) {
            tournament = newTournament;
            renderTournament();
        }
        
        // Function to advance teams in the tournament
        function advanceTeam(fromRoundIndex, fromMatchIndex, winningTeamNumber, players) {
            if (fromRoundIndex >= tournament.rounds.length - 1) return; // Can't advance from final
            
            const winningTeam = tournament.rounds[fromRoundIndex].matches[fromMatchIndex][`team${winningTeamNumber}`];
            
            // Calculate the match index in the next round (simplified logic)
            const toMatchIndex = Math.floor(fromMatchIndex / 2);
            
            // Calculate which team slot to fill (team1 or team2)
            const toTeamSlot = fromMatchIndex % 2 === 0 ? 'team1' : 'team2';
            
            // Update the next round with the winning team
            tournament.rounds[fromRoundIndex + 1].matches[toMatchIndex][toTeamSlot] = {
                name: winningTeam.name,
                players: players || winningTeam.players
            };
            
            renderTournament();
        }
        
        // Function to add a new round to the tournament
        function addTournamentRound(name) {
            tournament.rounds.push({
                name: name,
                matches: [{
                    team1: {
                        name: "INSERT NAMES",
                        players: ["dsf", "sdf", "df", "df"]
                    },
                    team2: {
                        name: "INSERT NAMES",
                        players: ["sdfds", "sdf", "sdf", "hello"]
                    }
                }]
            });
            renderTournament();
        }
    </script>
</body>
</html>
